100 REM TEST FB-FILL-PIXELS ON COMMANDER X16
110:
120 REM FILL SCREEN USING STEP SETTING 1-259.
130 REM DISPLAY THE JIFFY DELAY FOR EACH SETTING,
140 REM CALLING THE FUNCTION 20 TIMES.
150 REM A SMALL DROP CAN BE SEEN ON ACCELERATED STEP SIZES.
199:
200 SCREEN128
210 CLS
220:
230 FSTP=1
240 ROW=3
250 CLNBR=4+3 : REM COLUMN_NUMBER
258:
259:
260 GOSUB 3000  : REM  DRAW GRID
270:
280 LOCATE ROW,CLNBR
290 CNT=INT(320*240/FSTP)
300 IF CNT>65535 THEN CNT=65535
310 T1=TI
320 FCOLR=2
325 GOSUB 4000  : REM  BUFFER 8 BIT VALUES
330:
340 GOSUB 2000  : REM  DRAW TO SCREEN
350 FCOLR=FCOLR+1
360 IF FCOLR=2 GOTO 400
370 IF FCOLR<20 GOTO 340
380 FCOLR=0
390 GOTO 340
400:
410 T2=TI
420 PRINT T2-T1;
430:
440 CLNBR=CLNBR+3
450 IF CLNBR<34 GOTO 480
460 CLNBR=4
470 ROW=ROW+1
480 FSTP=FSTP+1
490 IF FSTP=260 OR FSTP=520 THEN GOTO 600
500 IF FSTP=780 THEN GOTO 990
510 GOTO 280
599:
600 LOCATE 30,1
605 PRINT "PRESS ANY KEY...";
610 GET TMP$: IF TMP$="" THEN 610 :  REM  WAIT FOR KEY
620 CLS
630 ROW=3
640 CLNBR=4
650 GOTO 260
989:
990 END
998:
999:
1000 REM SET CURSOR TO UPPER LEFT (0, INCREMENT 1)
1100 POKE $9F20, $00  : REM VERA-ADDR-L
1110 POKE $9F21, $00  : REM VERA-ADDR-M
1120 POKE $9F22, $10  : REM VERA-ADDR-H (INCREMENT 1)
1130 RETURN
1998:
1999:
2000 REM CURSOR-POSITION(0-0) - FB-FILL-PIXELS(CNT-FSTP-FCOLR)
2010 GOSUB 1000
2230 POKE $02, LCNT
2240 POKE $03, HCNT
2250 POKE $04, LFSTP
2260 POKE $05, HFSTP
2270 POKE $030C, FCOLR
2280 SYS $FF17  : REM FB-FILL-PIXELS
2290 RETURN
2998:
2999:
3000 REM DRAW GRID 0-259 OR 
3010 LOCATE 1,1
3011 IF FSTP > 250 THEN GOTO 3310
3020 PRINT "    00 01 02 03 04 05 06 07 08 09"
3030 PRINT
3040 PRINT "000"
3050 PRINT "010"
3060 PRINT "020"
3070 PRINT "030"
3080 PRINT "040"
3090 PRINT "050"
3100 PRINT "060"
3110 PRINT "070"
3120 PRINT "080"
3130 PRINT "090"
3140 PRINT "100"
3150 PRINT "110"
3160 PRINT "120"
3170 PRINT "130"
3180 PRINT "140"
3190 PRINT "150"
3200 PRINT "160"
3210 PRINT "170"
3220 PRINT "180"
3230 PRINT "190"
3240 PRINT "200"
3250 PRINT "210"
3260 PRINT "220"
3270 PRINT "230"
3280 PRINT "240"
3290 PRINT "250";
3300 RETURN
3310:
3311 IF FSTP > 500 THEN GOTO 3610
3320 PRINT "    00 01 02 03 04 05 06 07 08 09"
3330 PRINT
3340 PRINT "260"
3350 PRINT "270"
3360 PRINT "280"
3370 PRINT "290"
3380 PRINT "300"
3390 PRINT "310"
3400 PRINT "320"
3410 PRINT "330"
3420 PRINT "340"
3430 PRINT "350"
3440 PRINT "360"
3450 PRINT "370"
3460 PRINT "380"
3470 PRINT "390"
3480 PRINT "400"
3490 PRINT "410"
3500 PRINT "420"
3510 PRINT "430"
3520 PRINT "440"
3530 PRINT "450"
3540 PRINT "460"
3550 PRINT "470"
3560 PRINT "480"
3570 PRINT "490"
3580 PRINT "500"
3590 PRINT "510";
3600 RETURN
3610:
3620 PRINT "    00 01 02 03 04 05 06 07 08 09"
3630 PRINT
3640 PRINT "520"
3650 PRINT "530"
3660 PRINT "540"
3670 PRINT "550"
3680 PRINT "560"
3690 PRINT "570"
3700 PRINT "580"
3710 PRINT "590"
3720 PRINT "600"
3730 PRINT "610"
3740 PRINT "620"
3750 PRINT "630"
3760 PRINT "640"
3770 PRINT "650"
3780 PRINT "660"
3790 PRINT "670"
3800 PRINT "680"
3810 PRINT "690"
3820 PRINT "700"
3830 PRINT "710"
3840 PRINT "720"
3850 PRINT "730"
3860 PRINT "740"
3870 PRINT "750"
3880 PRINT "760"
3890 PRINT "770";
3900 RETURN
3998:
3999:
4000 REM BUFFER 8 BIT VALUES, TO AVOID MEASURING FLOAT DIVISION DELAY
4010 LCNT = CNT - INT(CNT/256)*256
4020 HCNT = INT(CNT/256)
4030 LFSTP = FSTP - INT(FSTP/256)*256
4040 HFSTP = INT(FSTP/256)
4050 RETURN
